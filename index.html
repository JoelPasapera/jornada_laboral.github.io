<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe de C√°lculo de Jornada Laboral - Recuperaci√≥n de Horas 2025</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;500;600;700&family=Source+Sans+3:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="document-container">
        <!-- Encabezado del documento -->
        <header class="document-header">
            <div class="header-decoration"></div>
            <h1 class="document-title">Informe de C√°lculo de Jornada Laboral</h1>
            <p class="document-subtitle">Recuperaci√≥n de Horas No Laboradas ‚Äî A√±o 2025</p>
            <div class="header-meta">
                <span class="meta-item">Documento generado: <span id="fecha-generacion"></span></span>
            </div>
        </header>

        <!-- Panel de Par√°metros -->
        <section class="parameters-section">
            <h2 class="section-title">
                <span class="section-number">¬ß1</span>
                Par√°metros de C√°lculo
            </h2>
            <p class="section-intro">
                Configure los par√°metros para personalizar el c√°lculo. Todos los valores pueden ser modificados
                para simular diferentes escenarios de recuperaci√≥n de horas.
            </p>

            <div class="parameters-grid">
                <div class="parameter-card highlight-card">
                    <label class="parameter-label" for="metodo-calculo">M√©todo de C√°lculo</label>
                    <select id="metodo-calculo" class="parameter-input">
                        <option value="diario" selected>Por D√çA (horas diarias √ó d√≠as laborales reales)</option>
                        <option value="semanal">Por SEMANA (horas semanales √ó semanas del mes)</option>
                    </select>
                    <span class="parameter-help">‚ö†Ô∏è IMPORTANTE: Determina c√≥mo se calculan las horas adeudadas. Ver
                        secci√≥n ¬ß2 para explicaci√≥n detallada.</span>
                </div>

                <div class="parameter-card">
                    <label class="parameter-label" for="mes-no-asistido">Mes No Asistido</label>
                    <select id="mes-no-asistido" class="parameter-input">
                        <option value="1" selected>Enero</option>
                        <option value="2">Febrero</option>
                        <option value="3">Marzo</option>
                        <option value="4">Abril</option>
                        <option value="5">Mayo</option>
                        <option value="6">Junio</option>
                        <option value="7">Julio</option>
                        <option value="8">Agosto</option>
                        <option value="9">Septiembre</option>
                        <option value="10">Octubre</option>
                        <option value="11">Noviembre</option>
                        <option value="12">Diciembre</option>
                    </select>
                    <span class="parameter-help">Mes durante el cual no se asisti√≥ al trabajo</span>
                </div>

                <!-- Input din√°mico que cambia seg√∫n el m√©todo -->
                <div class="parameter-card" id="card-jornada">
                    <label class="parameter-label" for="horas-jornada" id="label-jornada">Horas de Jornada Laboral
                        Diaria</label>
                    <input type="number" id="horas-jornada" class="parameter-input" value="6" min="1" max="48"
                        step="0.5">
                    <span class="parameter-help" id="help-jornada">Horas efectivas de trabajo por d√≠a (sin almuerzo).
                        Equivale a <span id="horas-equiv">30</span> horas semanales.</span>
                </div>

                <div class="parameter-card">
                    <label class="parameter-label" for="fecha-inicio-devolucion">Fecha de Inicio de Devoluci√≥n</label>
                    <input type="date" id="fecha-inicio-devolucion" class="parameter-input">
                    <span class="parameter-help">Fecha espec√≠fica desde la cual se comenz√≥ a devolver horas</span>
                </div>

                <div class="parameter-card">
                    <label class="parameter-label" for="fecha-corte">Fecha de Corte para C√°lculo</label>
                    <input type="date" id="fecha-corte" class="parameter-input">
                    <span class="parameter-help">Calcular horas devueltas hasta esta fecha</span>
                </div>

                <div class="parameter-card">
                    <label class="parameter-label" for="minutos-recuperacion">Minutos Adicionales Diarios para
                        Devoluci√≥n</label>
                    <input type="number" id="minutos-recuperacion" class="parameter-input" value="30" min="0" max="240"
                        step="5">
                    <span class="parameter-help">Tiempo extra diario que se trabaja para devolver horas</span>
                </div>

                <!-- NUEVO: Input para horas extra a favor -->
                <div class="parameter-card highlight-card-green">
                    <label class="parameter-label" for="horas-extra-favor">Horas Extra a Favor del Trabajador</label>
                    <div class="input-group">
                        <div class="input-with-unit">
                            <input type="number" id="horas-extra-favor" class="parameter-input" value="0" min="0"
                                max="500" step="0.5">
                            <span class="input-unit">horas</span>
                        </div>
                        <div class="input-with-unit">
                            <input type="number" id="minutos-extra-favor" class="parameter-input" value="0" min="0"
                                max="59" step="1">
                            <span class="input-unit">minutos</span>
                        </div>
                    </div>
                    <span class="parameter-help">Horas extra que el trabajador ya ten√≠a acumuladas a su favor antes del
                        per√≠odo de devoluci√≥n. Estas horas se RESTAN de las horas pendientes.</span>
                </div>
            </div>

            <button id="btn-calcular" class="btn-calculate">
                <span class="btn-icon">‚ü≥</span>
                Calcular Informe
            </button>
            
            <!-- Botones de exportaci√≥n (inicialmente ocultos) -->
            <div id="botones-exportacion" class="export-buttons hidden">
                <div class="export-buttons-title">Exportar Informe</div>
                <div class="export-buttons-group">
                    <button id="btn-copiar" class="btn-export btn-copiar" title="Copiar informe completo al portapapeles">
                        <span class="btn-icon">üìã</span>
                        Copiar Texto
                    </button>
                    <button id="btn-preview" class="btn-export btn-preview" title="Ver vista previa del informe en texto plano">
                        <span class="btn-icon">üëÅ</span>
                        Vista Previa
                    </button>
                    <button id="btn-pdf" class="btn-export btn-pdf" title="Descargar informe completo en PDF">
                        <span class="btn-icon">üìÑ</span>
                        Descargar PDF
                    </button>
                </div>
            </div>
        </section>

        <!-- Mensaje inicial antes de calcular -->
        <section id="mensaje-inicial" class="mensaje-inicial-section">
            <div class="mensaje-inicial-box">
                <span class="mensaje-icon">üìä</span>
                <h3>Configure los par√°metros y genere el informe</h3>
                <p>Complete los par√°metros de c√°lculo en la secci√≥n anterior y presione el bot√≥n <strong>"Calcular
                        Informe"</strong> para generar el an√°lisis detallado de horas adeudadas y devueltas.</p>
                <p class="mensaje-hint">El informe incluir√°: c√°lculos paso a paso, calendario visual, tablas detalladas
                    y proyecciones.</p>
            </div>
        </section>

        <!-- Contenedor de resultados (inicialmente oculto) -->
        <div id="resultados-container" class="resultados-ocultos">

            <!-- Explicaci√≥n de M√©todos de C√°lculo -->
            <section class="methods-section">
                <h2 class="section-title">
                    <span class="section-number">¬ß2</span>
                    M√©todos de C√°lculo: Por D√≠a vs Por Semana
                </h2>
                <p class="section-intro">
                    <strong>PUNTO CR√çTICO:</strong> Existen dos m√©todos v√°lidos para calcular las horas de un mes,
                    y producen resultados diferentes. Es fundamental entender cu√°l aplica seg√∫n el acuerdo laboral
                    establecido.
                </p>

                <div class="methods-comparison">
                    <div class="method-card method-daily" id="method-card-daily">
                        <div class="method-header">
                            <span class="method-icon">üìÖ</span>
                            <h3>M√©todo por D√çA</h3>
                            <span class="method-badge recommended">RECOMENDADO</span>
                        </div>
                        <div class="method-body">
                            <p class="method-description">
                                Calcula las horas bas√°ndose en los <strong>d√≠as laborales reales</strong> del mes,
                                descontando fines de semana <strong>Y feriados</strong>.
                            </p>
                            <div class="method-formula">
                                <strong>F√≥rmula:</strong><br>
                                Horas del Mes = Horas por D√≠a √ó D√≠as Laborales Reales<br>
                                <span style="color: #c53030;">(Los feriados S√ç se descuentan)</span>
                            </div>
                            <div class="method-example">
                                <strong>Ejemplo Enero 2025:</strong><br>
                                23 d√≠as L-V ‚àí 1 feriado (1 enero) = 22 d√≠as laborales<br>
                                6 horas/d√≠a √ó 22 d√≠as = <strong>132 horas</strong>
                            </div>
                            <p class="method-when">
                                <strong>Usar cuando:</strong> El compromiso es "trabajar X horas por cada d√≠a laboral".
                                Este es el m√©todo est√°ndar seg√∫n la legislaci√≥n laboral peruana.
                            </p>
                        </div>
                    </div>

                    <div class="method-card method-weekly" id="method-card-weekly">
                        <div class="method-header">
                            <span class="method-icon">üìÜ</span>
                            <h3>M√©todo por SEMANA</h3>
                            <span class="method-badge">ALTERNATIVO</span>
                        </div>
                        <div class="method-body">
                            <p class="method-description">
                                Calcula las horas multiplicando las horas semanales por el
                                <strong>n√∫mero de semanas</strong> que tiene el mes.
                            </p>
                            <div class="method-formula">
                                <strong>F√≥rmula:</strong><br>
                                Horas del Mes = Horas por Semana √ó Semanas del Mes<br>
                                <span style="color: #c53030;">(Los feriados NO se descuentan)</span>
                            </div>
                            <div class="method-example">
                                <strong>Ejemplo Enero 2025:</strong><br>
                                30 horas/semana √ó 5 semanas = <strong>150 horas</strong><br>
                                (No descuenta el feriado del 1 de enero)
                            </div>
                            <p class="method-when">
                                <strong>Usar cuando:</strong> El compromiso expl√≠cito es "trabajar X horas por semana".
                            </p>
                        </div>
                    </div>
                </div>

                <div class="methods-warning">
                    <span class="warning-icon">‚ö†Ô∏è</span>
                    <div class="warning-content">
                        <strong>ADVERTENCIA IMPORTANTE:</strong>
                        <p>
                            La diferencia entre ambos m√©todos puede ser significativa (en Enero 2025: <strong>18 horas
                                de diferencia</strong>).
                            El m√©todo por d√≠a descuenta los feriados porque son d√≠as de descanso obligatorio y
                            remunerado ‚Äî
                            el trabajador NO debe recuperar un d√≠a que por ley no estaba obligado a trabajar.
                            Si el empleador exige usar el m√©todo semanal cuando el acuerdo es por d√≠a, estar√≠a
                            solicitando
                            horas extra no correspondientes.
                        </p>
                    </div>
                </div>

                <div id="metodo-actual-detalle" class="current-method-detail">
                    <!-- Se llena din√°micamente -->
                </div>
            </section>

            <!-- Glosario de T√©rminos -->
            <section class="glossary-section">
                <h2 class="section-title">
                    <span class="section-number">¬ß3</span>
                    Glosario de T√©rminos
                </h2>
                <p class="section-intro">
                    Para garantizar la claridad y evitar cualquier ambig√ºedad en la interpretaci√≥n de este informe,
                    se definen los siguientes t√©rminos:
                </p>

                <div class="glossary-grid">
                    <div class="glossary-item">
                        <dt>Horas Adeudadas</dt>
                        <dd>Total de horas de trabajo que el empleado debe al empleador por no haber asistido durante el
                            mes especificado. <strong>En el m√©todo por d√≠a, se descuentan los feriados</strong> porque
                            el trabajador no estaba obligado a trabajar esos d√≠as.</dd>
                    </div>
                    <div class="glossary-item">
                        <dt>Horas Ya Devueltas</dt>
                        <dd>Total de horas que el empleado ha trabajado de manera adicional hasta la fecha de corte. Son
                            horas que ya han sido efectivamente laboradas como parte del proceso de recuperaci√≥n.</dd>
                    </div>
                    <div class="glossary-item">
                        <dt>Horas Extra a Favor</dt>
                        <dd>Horas adicionales que el trabajador ya ten√≠a acumuladas antes del per√≠odo de devoluci√≥n por
                            haber trabajado m√°s de lo requerido en ocasiones anteriores. Estas horas se restan de las
                            pendientes.</dd>
                    </div>
                    <div class="glossary-item">
                        <dt>Horas Pendientes por Devolver</dt>
                        <dd>Diferencia entre las horas adeudadas y las horas ya devueltas (incluyendo horas extra a
                            favor). Representa la cantidad de horas que a√∫n faltan por trabajar.</dd>
                    </div>
                    <div class="glossary-item">
                        <dt>D√≠as Laborales</dt>
                        <dd>D√≠as de lunes a viernes, excluyendo s√°bados, domingos y <strong>feriados
                                nacionales</strong>. Los feriados son d√≠as de descanso obligatorio.</dd>
                    </div>
                    <div class="glossary-item">
                        <dt>Feriados Nacionales</dt>
                        <dd>D√≠as de descanso obligatorio y remunerado establecidos por ley. <strong>NO se deben
                                recuperar</strong> porque el trabajador no ten√≠a obligaci√≥n de laborar. En el m√©todo por
                            d√≠a, se descuentan del c√°lculo.</dd>
                    </div>
                    <div class="glossary-item">
                        <dt>Jornada Laboral Efectiva</dt>
                        <dd>Las horas de trabajo productivo requeridas por d√≠a o por semana (seg√∫n el m√©todo), sin
                            incluir el tiempo de almuerzo.</dd>
                    </div>
                    <div class="glossary-item">
                        <dt>Tiempo de Devoluci√≥n Diario</dt>
                        <dd>Los minutos adicionales que el empleado trabaja cada d√≠a laboral m√°s all√° de su jornada
                            regular, con el prop√≥sito espec√≠fico de devolver las horas adeudadas.</dd>
                    </div>
                </div>
            </section>

            <!-- Feriados Considerados -->
            <section class="holidays-section">
                <h2 class="section-title">
                    <span class="section-number">¬ß4</span>
                    Feriados Nacionales Considerados (Per√∫ 2025)
                </h2>
                <p class="section-intro">
                    Los siguientes feriados nacionales son d√≠as de descanso obligatorio y remunerado.
                    <strong>En el m√©todo por d√≠a, estos se excluyen del c√°lculo de horas adeudadas</strong> porque el
                    trabajador no ten√≠a obligaci√≥n de laborar.
                </p>
                <div id="lista-feriados" class="holidays-list">
                    <!-- Se llena din√°micamente -->
                </div>
                <div id="feriados-impacto" class="feriados-impacto">
                    <!-- Se llena din√°micamente -->
                </div>
            </section>

            <!-- Resumen Ejecutivo -->
            <section class="summary-section">
                <h2 class="section-title">
                    <span class="section-number">¬ß5</span>
                    Resumen Ejecutivo
                </h2>
                <div id="resumen-ejecutivo" class="summary-cards">
                    <!-- Contenido generado din√°micamente -->
                </div>
            </section>

            <!-- C√°lculo del Mes No Asistido -->
            <section class="calculation-section">
                <h2 class="section-title">
                    <span class="section-number">¬ß6</span>
                    C√°lculo de Horas Adeudadas (Mes No Asistido)
                </h2>
                <div id="calculo-mes-no-asistido">
                    <!-- Contenido generado din√°micamente -->
                </div>
            </section>

            <!-- Calendario Visual -->
            <section class="calendar-section">
                <h2 class="section-title">
                    <span class="section-number">¬ß7</span>
                    Calendario del Mes No Asistido: <span id="calendario-mes-titulo"></span>
                </h2>
                <p class="section-intro">
                    Visualizaci√≥n del calendario mostrando los d√≠as laborales, fines de semana y feriados del mes no
                    asistido.
                </p>
                <div id="calendario-mes" class="calendar-container">
                    <!-- Calendario generado din√°micamente -->
                </div>
                <div id="calendario-leyenda" class="calendar-legend">
                    <!-- Leyenda generada din√°micamente -->
                </div>
            </section>

            <!-- C√°lculo de D√≠as de Recuperaci√≥n -->
            <section class="calculation-section">
                <h2 class="section-title">
                    <span class="section-number">¬ß8</span>
                    C√°lculo de Horas Ya Devueltas (Hasta Fecha de Corte)
                </h2>
                <div id="calculo-horas-devueltas">
                    <!-- Contenido generado din√°micamente -->
                </div>
            </section>

            <!-- Balance Final -->
            <section class="balance-section">
                <h2 class="section-title">
                    <span class="section-number">¬ß9</span>
                    Balance Final y Proyecci√≥n
                </h2>
                <div id="balance-final">
                    <!-- Contenido generado din√°micamente -->
                </div>
            </section>

            <!-- Tablas Detalladas -->
            <section class="tables-section">
                <h2 class="section-title">
                    <span class="section-number">¬ß10</span>
                    Detalle de D√≠as Laborales
                </h2>

                <div class="table-container">
                    <h3 class="table-title">10.1 D√≠as Laborales del Mes No Asistido</h3>
                    <div id="tabla-mes-no-asistido" class="table-wrapper">
                        <!-- Tabla generada din√°micamente -->
                    </div>
                </div>

                <div class="table-container">
                    <h3 class="table-title">10.2 D√≠as Laborales con Devoluci√≥n de Horas (Hasta Fecha de Corte)</h3>
                    <div id="tabla-dias-devolucion" class="table-wrapper">
                        <!-- Tabla generada din√°micamente -->
                    </div>
                </div>
            </section>

            <!-- Metodolog√≠a -->
            <section class="methodology-section">
                <h2 class="section-title">
                    <span class="section-number">¬ß11</span>
                    Metodolog√≠a de C√°lculo
                </h2>
                <div id="metodologia">
                    <!-- Contenido generado din√°micamente -->
                </div>
            </section>

            <!-- Notas y Advertencias -->
            <section class="notes-section">
                <h2 class="section-title">
                    <span class="section-number">¬ß12</span>
                    Notas y Consideraciones
                </h2>
                <div class="notes-content">
                    <div class="note note-success">
                        <span class="note-icon">‚úì</span>
                        <div class="note-text">
                            <strong>Feriados incluidos:</strong> Este c√°lculo S√ç considera los feriados nacionales de
                            Per√∫ 2025.
                            En el m√©todo por d√≠a, los feriados se descuentan porque el trabajador no debe recuperar d√≠as
                            que por ley no estaba obligado a laborar.
                        </div>
                    </div>
                    <div class="note note-info">
                        <span class="note-icon">‚Ñπ</span>
                        <div class="note-text">
                            <strong>Base legal:</strong> Seg√∫n la legislaci√≥n laboral peruana, las horas se calculan
                            por los d√≠as efectivos de trabajo, no por aproximaciones semanales. Los feriados son d√≠as de
                            descanso obligatorio y remunerado.
                        </div>
                    </div>
                    <div class="note note-warning">
                        <span class="note-icon">‚ö†</span>
                        <div class="note-text">
                            <strong>Verificaci√≥n recomendada:</strong> Se recomienda contrastar este informe con los
                            registros oficiales de asistencia y confirmar que los feriados aplicables coinciden.
                        </div>
                    </div>
                    <div class="note note-success">
                        <span class="note-icon">‚úì</span>
                        <div class="note-text">
                            <strong>Precisi√≥n del c√°lculo:</strong> Todos los c√°lculos se realizan con precisi√≥n de
                            minutos y se muestran tanto en formato decimal (horas) como en formato horario (HH:MM)
                            para facilitar la verificaci√≥n.
                        </div>
                    </div>
                </div>
            </section>

        </div><!-- Fin de resultados-container -->

        <!-- Pie de documento -->
        <footer class="document-footer">
            <div class="footer-line"></div>
            <p class="footer-text">
                Documento generado autom√°ticamente para fines de verificaci√≥n y auditor√≠a.
                <br>
                Todos los c√°lculos son transparentes y verificables mediante las f√≥rmulas expuestas en este informe.
            </p>
        </footer>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
    <script src="reporte.js"></script>
</body>
</body>

</html>
